<ui:FluentWindow x:Class="SteamStartMenu.Views.MainWindow"
                 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                 xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                 xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
                 mc:Ignorable="d"
                 Title="Steam Shortcut Creator"
                 Height="500" Width="850"
                 WindowBackdropType="Mica"
                 ResizeMode="CanResizeWithGrip"
                 ExtendsContentIntoTitleBar="True">

    <DockPanel>
        <!-- Win11-style Title Bar -->
        <ui:TitleBar Title="Steam Shortcut Creator"
                     Icon="Game20"
                     DockPanel.Dock="Top" />

        <Grid Margin="16">
            <Grid.RowDefinitions>
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <!-- LIST -->
            <ui:Card Margin="0,0,0,12" Padding="8">
                <ListBox x:Name="AppListBox"
                         SelectionMode="Single"
                         BorderThickness="0"
                         Background="Transparent"
                         MouseDoubleClick="AppListBox_MouseDoubleClick"
                         SelectionChanged="AppListBox_SelectionChanged"
                         ScrollViewer.CanContentScroll="True"
                         VirtualizingStackPanel.IsVirtualizing="True">
                    <ListBox.ItemContainerStyle>
                        <Style TargetType="ListBoxItem">
                            <Setter Property="Padding" Value="6" />
                            <Setter Property="Margin" Value="0,2" />
                            <Setter Property="Background" Value="Transparent" />
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="ListBoxItem">
                                        <Border x:Name="Bd" CornerRadius="8" Background="{TemplateBinding Background}">
                                            <ContentPresenter />
                                        </Border>
                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter TargetName="Bd" Property="Background"
                                                        Value="{DynamicResource ControlFillColorSecondaryBrush}" />
                                            </Trigger>
                                            <Trigger Property="IsSelected" Value="True">
                                                <Setter TargetName="Bd" Property="Background"
                                                        Value="{DynamicResource ControlFillColorDefaultBrush}" />
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </ListBox.ItemContainerStyle>

                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal">
                                <Border Width="64" Height="64" CornerRadius="8"
                                        Background="{DynamicResource ControlFillColorSecondaryBrush}"
                                        Margin="0,0,12,0">
                                    <Image Source="{Binding Icon}" Stretch="Uniform" />
                                </Border>
                                <StackPanel VerticalAlignment="Center">
                                    <ui:TextBlock Text="{Binding Name}"
                                                  FontWeight="SemiBold"
                                                  FontSize="16" />
                                    <ui:TextBlock Text="{Binding AppId}"
                                                  FontSize="13"
                                                  Foreground="{DynamicResource TextFillColorSecondaryBrush}" />
                                </StackPanel>
                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </ui:Card>

            <!-- ACTIONS -->
            <ui:Card Grid.Row="1" Padding="12">
                <StackPanel Orientation="Vertical">
                    <!-- Status line (auto-hides) -->
                    <ui:TextBlock x:Name="StatusText"
                                  Visibility="Collapsed"
                                  Margin="0,0,0,8"
                                  FontSize="13"
                                  Foreground="{DynamicResource TextFillColorSecondaryBrush}" />

                    <!-- Selected game -->
                    <ui:TextBlock x:Name="SelectedGameLabel"
                                  FontSize="14"
                                  Margin="0,0,0,8"
                                  Text="Pick a game from the list." />

                    <!-- Primary action -->
                    <ui:Button x:Name="CreateShortcutButton"
                               Content="Create Shortcut"
                               IsEnabled="False"
                               Appearance="Success"
                               Click="ConfirmSelection_Click" />
                </StackPanel>
            </ui:Card>
        </Grid>
    </DockPanel>
</ui:FluentWindow>